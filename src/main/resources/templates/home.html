<!DOCTYPE html>
<html lang="zh" xmlns:th="https://www.thymeleaf.org">

<head>
    <link rel="stylesheet" th:href="@{/thirdparty/bootstrap/3.3.7/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/thirdparty/bootstrap/3.3.7/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/common/home/home.css}">
    <link rel="stylesheet" th:href="@{/common/template/css/scrollbar.css}">
    <script th:src="@{/thirdparty/jquery/jquery.min.js}"></script>
    <script th:src="@{/thirdparty/bootstrap/3.3.7/bootstrap.min.js}"></script>
    <script th:src="@{/thirdparty/echarts/4.6/echarts.min.js}"></script>
    <meta charset="UTF-8">
    <title>主页</title>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4" id="left">
                <div class="row">
                    <div class="col-md-12">
                        <div class="header">
                            <span>人流分析</span>
                            <span class="pull-right">
                                <span>近1小时</span>
                                <span class="active">近24小时</span>
                                <span>近7日</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 item">
                        <span>年龄性别分布</span>
                        <div id="age-gender"></div>
                    </div>
                    <div class="col-md-12 item">
                        <span>肤色分布</span>
                        <div id="complexion"></div>
                    </div>
                    <div class="col-md-12 item">
                        <span>物品统计</span>
                        <div class="row">
                            <div class="col-md-6">
                                <span class="glyphicon glyphicon-cloud"></span>
                                <span>
                                    <span>59</span>
                                    <span>眼镜</span>
                                </span>
                            </div>
                            <div class="col-md-6">
                                <span class="glyphicon glyphicon-cloud"></span>
                                <span>
                                    <span>59</span>
                                    <span>墨镜</span>
                                </span>
                            </div>
                            <div class="col-md-6">
                                <span class="glyphicon glyphicon-cloud"></span>
                                <span>
                                    <span>59</span>
                                    <span>口罩</span>
                                </span>
                            </div>
                            <div class="col-md-6">
                                <span class="glyphicon glyphicon-cloud"></span>
                                <span>
                                    <span>59</span>
                                    <span>帽子</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8" id="right">
                <div class="header">
                    <span>人流统计</span>
                    <span class="pull-right" id="system-datetime">系统时间</span>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="row" id="visitors-flow-rate">
                            <div class="col-md-12 title">报警统计</div>
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-6 count-title">
                                        <div>86</div>
                                        <div>今日报警</div>
                                    </div>
                                    <div class="col-md-6 count-title">
                                        <div>860</div>
                                        <div>最近7日报警</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" id="photograph">
                            <div class="col-md-12 title">抓拍统计</div>
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="col-md-6 count-title">
                                        <div>86</div>
                                        <div>今日抓拍</div>
                                    </div>
                                    <div class="col-md-6 count-title">
                                        <div>860</div>
                                        <div>最近7日抓拍</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-12">最近7日数据</div>
                            <div class="col-md-12">
                                <div id="recent-data"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" id="system">
                    <div class="col-md-12 header">系统状况</div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6 left">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div>图像库</div>
                                        <div>1/10</div>
                                        <div>当前数量/最大数量</div>
                                    </div>
                                    <div class="col-md-6">
                                        <div>摄像头</div>
                                        <div>1/6</div>
                                        <div>当前接入/最大数量</div>
                                    </div>
                                    <div class="col-md-6 margin0">
                                        <div>图像总数</div>
                                        <div>1/10000</div>
                                        <div>当前数量/最大数量</div>
                                    </div>
                                    <div class="col-md-6 margin0">
                                        <div>智能任务</div>
                                        <div>1/10</div>
                                        <div>当前任务/最大任务</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 right">
                                <div class="row">
                                    <div class="col-md-12" id="system-usage"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        ageGender(document.getElementById("age-gender"));
        complexion(document.getElementById("complexion"));
        recentData(document.getElementById("recent-data"));
        systemUsage(document.getElementById("system-usage"));

        function ageGender(dom) {
            var option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                        type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                },
                legend: {
                    data: ['男', '女']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value'
                },
                yAxis: {
                    type: 'category',
                    data: ['老年', '中老年', '中年', '中青年', '青年', '青少年', '小孩']
                },
                series: [
                    {
                        name: '男',
                        type: 'bar',
                        stack: '总量',
                        label: {
                            show: true,
                            position: 'insideRight'
                        },
                        data: [0, 0, 13, 36, 32, 4, 0]
                    },
                    {
                        name: '女',
                        type: 'bar',
                        stack: '总量',
                        label: {
                            show: true,
                            position: 'insideRight'
                        },
                        data: [0, 0, 4, 0, 10, 1, 0]
                    },
                ]
            };
            echarts.init(dom).setOption(option);
        }

        function complexion(dom) {
            option = {
                tooltip: {
                    trigger: 'item',
                    formatter: '{a} <br/>{b}: {c} ({d}%)'
                },
                legend: {
                    orient: 'vertical',
                    left: 10,
                    data: ['白人', '黑人', '黄种人', '棕种人']
                },
                series: [
                    {
                        name: '肤色',
                        type: 'pie',
                        radius: ['50%', '70%'],
                        avoidLabelOverlap: false,
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: '30',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            { value: 0, name: '白人' },
                            { value: 4, name: '黑人' },
                            { value: 71, name: '黄种人' },
                            { value: 20, name: '棕种人' },
                        ]
                    }
                ]
            };
            echarts.init(dom).setOption(option);
        }

        function recentData(dom) {
            option = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['抓拍数量', '报警数量']
                },
                xAxis: {
                    type: 'category',
                    data: ['1', '2', '3', '4', '5', '6', '7']
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: "抓拍数量",
                        data: [0, 0, 0, 0, 0, 0, 0],
                        type: 'line'
                    },
                    {
                        name: "报警数量",
                        data: [0, 10, 20, 150, 100, 10, 5],
                        type: 'line'
                    },
                ]
            };

            echarts.init(dom).setOption(option);
        }

        function systemUsage(dom) {
            option = {
                title: {
                    text: '系统占用'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                legend: {
                    data: ['内存', '磁盘', 'CPU']
                },
                toolbox: {
                    feature: {
                        saveAsImage: {}
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: [
                    {
                        type: 'category',
                        boundaryGap: false,
                        data: ['0', '10', '20', '30', '40', '50', '60']
                    }
                ],
                yAxis: [
                    {
                        type: 'value'
                    }
                ],
                series: [
                    {
                        name: '内存',
                        type: 'line',
                        data: [20, 32, 25, 34, 30, 35, 20]
                    },
                    {
                        name: '磁盘',
                        type: 'line',
                        data: [20, 22, 21, 24, 20, 20, 20]
                    },
                    {
                        name: 'CPU',
                        type: 'line',
                        data: [50, 52, 51, 54, 50, 50, 50]
                    },
                ]
            };

            echarts.init(dom).setOption(option);
        }

        const $datetime = $("#system-datetime");
        setInterval(()=>{
            $datetime.text(new Date().toLocaleString());
        },1000);
    </script>
</body>

</html>